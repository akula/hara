

<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <meta name="google" value="notranslate">


    <title>io.file - tools for the file system</title>

    
  <link href='http://fonts.googleapis.com/css?family=Raleway:300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">

  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/languages/clojure.min.js"></script>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/magula.min.css">

  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.2/angular.min.js"></script>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular-cookies.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.13.0/ui-bootstrap-tpls.min.js"></script>
  <script type="text/javascript" src="js/angular-highlightjs.min.js"></script>

  <link rel="stylesheet" type="text/css" href="css/rdash.min.css">
  <link rel="stylesheet" type="text/css" href="css/scrollspy.css">


  <script>
    window.console = window.console || function(t) {};
    window.open = function(){ console.log("window.open is disabled."); };
    window.print   = function(){ console.log("window.print is disabled."); };
  </script>

  <script>
    var app = angular.module('app', ['hljs']);
  </script>
  </head>

  <body ng-app="app" data-spy="scroll" data-target=".scrollspy">
  <!-- Fixed navbar -->
    <nav class="navbar navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html"><img src="img/logo.png"></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Guides <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="hara-class.html">class</a></li>
                <li><a href="hara-common.html">common</a></li>
                <li><a href="hara-component.html">component</a></li>
                <li><a href="hara-concurrent.html">concurrent</a></li>
                <li><a href="hara-concurrent-ova.html">concurrent.ova</a></li>
                <li><a href="hara-concurrent-procedure.html">concurrent.procedure</a></li>
                <li><a href="hara-data.html">data</a></li>
                <li><a href="hara-event.html">event</a></li>
                <li><a href="hara-expression.html">expression</a></li>
                <li><a href="hara-extend.html">extend</a></li>
                <li><a href="hara-function.html">function</a></li>
                <li><a href="hara-group.html">group</a></li>
                <li><a href="hara-io-environment.html">io.environment</a></li>
                <li><a href="hara-io-file.html">io.file</a></li>
                <li><a href="hara-io-scheduler.html">io.scheduler</a></li>
                <li><a href="hara-io-watch.html">io.watch</a></li>
                <li><a href="hara-namespace.html">namespace</a></li>
                <li><a href="hara-object.html">object</a></li>
                <li><a href="hara-reflect.html">reflect</a></li>
                <li><a href="hara-sort.html">sort</a></li>
                <li><a href="hara-string.html">string</a></li>
                <li><a href="hara-test.html">test</a></li>
                <li><a href="hara-time.html">time</a></li>
            </ul>
            </li>
            <li>
              <a href="https://github.com/zcaudate/hara" target="_blank">Github</a></li>
            <li>
              <a href="http://gitter.im/zcaudate/hara" target="_blank">Gitter</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>


  <div class="container row">
    <div class="col-md-4 scrollspy pull-right">
      <ul id="nav" class="nav hidden-xs hidden-sm" data-spy="affix">
        <li><a href="#introduction">1  &nbsp;&nbsp; Introduction</a><ul class="nav"><li><a href="#installation">1.1  &nbsp;&nbsp; Installation</a></li><li><a href="#motivation">1.2  &nbsp;&nbsp; Motivation</a></li></ul></li><li><a href="#basics">2  &nbsp;&nbsp; Basics</a><ul class="nav"><li><a href="#path">2.1  &nbsp;&nbsp; path</a></li><li><a href="#path-0">2.2  &nbsp;&nbsp; path?</a></li><li><a href="#reader">2.3  &nbsp;&nbsp; reader</a></li><li><a href="#attributes">2.4  &nbsp;&nbsp; attributes</a></li><li><a href="#set-attributes">2.5  &nbsp;&nbsp; set-attributes</a></li><li><a href="#permissions">2.6  &nbsp;&nbsp; permissions</a></li></ul></li><li><a href="#creation">3  &nbsp;&nbsp; Creation</a><ul class="nav"><li><a href="#create-directory">3.1  &nbsp;&nbsp; create-directory</a></li><li><a href="#create-symlink">3.2  &nbsp;&nbsp; create-symlink</a></li><li><a href="#create-tmpdir">3.3  &nbsp;&nbsp; create-tmpdir</a></li></ul></li><li><a href="#attributes-0">4  &nbsp;&nbsp; Attributes</a><ul class="nav"><li><a href="#directory">4.1  &nbsp;&nbsp; directory?</a></li><li><a href="#executable">4.2  &nbsp;&nbsp; executable?</a></li><li><a href="#exists">4.3  &nbsp;&nbsp; exists?</a></li><li><a href="#file">4.4  &nbsp;&nbsp; file?</a></li><li><a href="#hidden">4.5  &nbsp;&nbsp; hidden?</a></li><li><a href="#link">4.6  &nbsp;&nbsp; link?</a></li><li><a href="#readable">4.7  &nbsp;&nbsp; readable?</a></li><li><a href="#writable">4.8  &nbsp;&nbsp; writable?</a></li></ul></li><li><a href="#operations">5  &nbsp;&nbsp; Operations</a><ul class="nav"><li><a href="#list">5.1  &nbsp;&nbsp; list</a></li><li><a href="#select">5.2  &nbsp;&nbsp; select</a></li><li><a href="#copy">5.3  &nbsp;&nbsp; copy</a></li><li><a href="#delete">5.4  &nbsp;&nbsp; delete</a></li><li><a href="#move">5.5  &nbsp;&nbsp; move</a></li></ul></li>
      </ul>
    </div>
    <div class="col-md-8" id="content">
      <div class="jumbotron">
        <div class="container">
          <h1>io.file</h1>
          <h4>tools for the file system</h4>
        </div>
      </div>
      <section class="chapter" id="introduction"><h2 class="chapter">1  &nbsp;&nbsp; Introduction</h2><div class="group"><div class="paragraph"><p><a href='https://github.com/zcaudate/hara/blob/master/src/hara/io/file.clj'>hara.io.file</a> contain functions and utilities for file system manipulation using the <code>java.nio.file</code> package. Efforts have been made to allow filesystem operations to be as easy and straightforward to use as possible.</p></div></div><section class="section" id="installation"><h3 class="section">1.1  &nbsp;&nbsp; Installation</h3><div class="paragraph"><p>Add to <code>project.clj</code> dependencies:</p><pre><code>&#91;im.chit/hara.io.file &quot;2.4.3&quot;&#93;
</code></pre></div></section><section class="section" id="motivation"><h3 class="section">1.2  &nbsp;&nbsp; Motivation</h3><div class="paragraph"><p>This library was written because of a need to gain greater control over selecting files within a directory. There are a couple of other filesystem libraries for clojure:</p><ul><li><a href='https://github.com/raynes/fs'>fs</a> - the canonical filesystem library for clojure, based on <code>java.io</code> classes and makes use of <code>clojure.java.io</code>.</li><li><a href='https://github.com/pjstadig/nio'>nio</a> - extends <code>clojure.java.io</code> functions to java.nio classes</li><li><a href='https://github.com/ToBeReplaced/nio.file'>nio.file</a> - an early wrapper for <code>java.nio.file</code>, it holds true to the java implementation.</li></ul><p> <code>hara.io.file</code> wraps functionality over the <code>java.nio.file</code> package. <strong>NIO</strong> stands for <em>'New IO'</em> - but it's not very new. The package was introduced with Java SE 1.4 in 2002 whilst the <code>nio.file</code> was added in Java SE 7, nicknamed <em>NIO.2</em>. Here are some more comparsions of the <code>java.io</code> vs <code>java.nio</code> scenarios:</p><ul><li><a href='https://dzone.com/articles/java-nio-vs-io'>Java NIO vs IO</a></li><li><a href='http://codingjunkie.net/java7-file-revolution'>Java 7 File Revolution</a></li><li><a href='http://stackoverflow.com/questions/7611152/nio-performance-improvement-compared-to-traditional-io-in-java'>NIO Performance Improvement compared to traditional IO in Java</a></li><li><a href='http://stackoverflow.com/questions/32143633/java-io-file-vs-java-nio-files-which-is-the-preferred-in-new-code'>java.io.File vs java.nio.Files which is the preferred in new code?</a></li><li><a href='http://java7fs.wikia.com/wiki/Why&#95;File&#95;sucks'>Why File Sucks</a></li></ul><p><a href='https://github.com/zcaudate/hara/blob/master/src/hara/io/file.clj'>hara.io.file</a> written due to the belief that the <code>java.io</code> package was not consistent enough for file system operations. Furthermore, file system operations use the <a href='https://docs.oracle.com/javase/7/docs/api/java/nio/file/FileVisitor.html'>FileVisitor</a> pattern as it was easier to think about file and directory manipulation as bulk operations. If an operation can be done on a whole group of files, then that operation can also be readily done on a single file, thus making the codebase smaller and more robust.</p></div></section></section><section class="chapter" id="basics"><h2 class="chapter">2  &nbsp;&nbsp; Basics</h2><section class="section" id="path"><h3 class="section">2.1  &nbsp;&nbsp; path</h3><div class="paragraph"><p>Creates a <code>java.nio.file.Path</code> object:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(path &quot;project.clj&quot;)
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/project.clj&quot;</div></div><div class="paragraph"><p>And can be used in various different ways:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(path &quot;hello&quot; &quot;world&quot;)
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/hello/world&quot;

(path [&quot;hello&quot; &quot;world&quot;])
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/hello/world&quot;</div></div><div class="paragraph"><p>It also supports <code>java.io.File</code> and <code>java.net.URI</code></p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(path (java.io.File. &quot;project.clj&quot;))
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/project.clj&quot;

(path (java.net.URI. &quot;file:///Users/chris/Development/chit/hara/project.clj&quot;))
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/project.clj&quot;</div></div><div class="paragraph"><p>The function is idempotent:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(path (path &quot;project.clj&quot;))
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/project.clj&quot;</div></div></section><section class="section" id="path-0"><h3 class="section">2.2  &nbsp;&nbsp; path?</h3><div class="paragraph"><p>Checks whether as object is an instance of <code>java.nio.file.Path</code></p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(path? (path &quot;&quot;)) =&gt; true

(path? &quot;project.clj&quot;) =&gt; false</div></div></section><section class="section" id="reader"><h3 class="section">2.3  &nbsp;&nbsp; reader</h3><div class="paragraph"><p>Returns a <code>java.io.Reader</code> instance:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(reader &quot;project.clj&quot;)
;;=&gt; #object[java.io.BufferedReader 0x2b0c6784 &quot;java.io.BufferedReader@2b0c6784&quot;]</div></div><div class="paragraph"><p>A type of reader can be specified. The most useful is the <code>java.io.PushbackReader</code></p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(-&gt;&gt; (reader :pushback &quot;project.clj&quot;)
     (read)
     (take 5))
=&gt; '(defproject im.chit/hara &quot;2.4.2&quot; :description &quot;patterns and utilities&quot;)</div></div><div class="paragraph"><p>Additional readers can be created through the <code>type</code> option, accessible through the <code>reader-types</code> function:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(reader-types)
=&gt; (:input-stream :buffered :file :string :pushback :char-array :piped :line-number)</div></div></section><section class="section" id="attributes"><h3 class="section">2.4  &nbsp;&nbsp; attributes</h3><div class="paragraph"><p>Returns attributes for a given path:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(attributes &quot;src&quot;)
=&gt; {:dev 16777220
    :ino 2378194
    :gid 20
    :uid 501
    :file-key &quot;(dev=1000004 ino=2378194)&quot;
    :is-regular-file false
    :permissions &quot;rwxr-xr-x&quot;
    :group &quot;staff&quot;
    :is-directory true
    :is-other false
    :mode 16877
    :size 102 
    :ctime 1473732706000
    :nlink 3
    :last-access-time 1473894825000
    :is-symbolic-link false
    :last-modified-time 1472294651000
    :creation-time 1472294651000
    :owner &quot;chris&quot;
    :rdev 0}</div></div></section><section class="section" id="set-attributes"><h3 class="section">2.5  &nbsp;&nbsp; set-attributes</h3><div class="paragraph"><p>Sets attributes for a file or directory:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(set-attributes &quot;src&quot; {:last-access-time 0
                       :permissions &quot;rwxr--r--&quot;})
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/src&quot;</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(-&gt; (attributes &quot;src&quot;)
    (select-keys [:permissions :last-access-time]))
=&gt; {:permissions &quot;rwxr--r--&quot;, :last-access-time 0}</div></div></section><section class="section" id="permissions"><h3 class="section">2.6  &nbsp;&nbsp; permissions</h3><div class="paragraph"><p>Returns the permissions of a file or directory:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(permissions &quot;project.clj&quot;)
=&gt; &quot;rw-r--r--&quot;</div></div><div class="paragraph"><p>We can use <code>java.nio.file.attribute.PosixFilePermissions</code> to change it into enums</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(-&gt;&gt; (permissions &quot;project.clj&quot;)
     (PosixFilePermissions/fromString)
     (mapv option/enum-&gt;keyword))
=&gt; [:owner-read :owner-write :group-read :others-read]</div></div></section></section><section class="chapter" id="creation"><h2 class="chapter">3  &nbsp;&nbsp; Creation</h2><section class="section" id="create-directory"><h3 class="section">3.1  &nbsp;&nbsp; create-directory</h3><div class="paragraph"><p>Creates a directory by creating all nonexistent parent directories first. An exception is not thrown if the directory could not be created because it already exists.</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(create-directory &quot;hello/world&quot;)
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/hello/world&quot;</div></div><div class="paragraph"><p>Additional attributes can be set when in the process of creating a directory:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(create-directory &quot;hello/world/foo&quot;
                  {:permissions &quot;rwxr--r--&quot;})
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/hello/world/foo&quot;</div></div><div class="paragraph"><p>If there is already a file in the place where the directory was suppose to be created, it will throw an error:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(create-directory &quot;project.clj&quot;
                  {:permissions &quot;rwxr--r--&quot;})
=&gt; (throws java.nio.file.FileAlreadyExistsException)</div></div></section><section class="section" id="create-symlink"><h3 class="section">3.2  &nbsp;&nbsp; create-symlink</h3><div class="paragraph"><p>Creates a symlink on the filesystem:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(create-symlink &quot;project.lnk&quot; &quot;project.clj&quot;)
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/project.lnk&quot;</div></div><div class="paragraph"><p>It will throw an error if the file already exists:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(create-symlink &quot;project.lnk&quot; &quot;project.clj&quot;)
=&gt; (throws java.nio.file.FileAlreadyExistsException)</div></div></section><section class="section" id="create-tmpdir"><h3 class="section">3.3  &nbsp;&nbsp; create-tmpdir</h3><div class="paragraph"><p>Creates a temporary directory:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(create-tmpdir)
;;=&gt; #path:&quot;/var/folders/d6/yrjldmsd4jd1h0nm970wmzl40000gn/T/6374416729058333137&quot;</div></div><div class="paragraph"><p>Can be passed a prefix for identification purposes:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(create-tmpdir &quot;PREFIX&quot;)
;;=&gt; #path:&quot;/var/folders/d6/yrjldmsd4jd1h0nm970wmzl40000gn/T/PREFIX618209873171547190&quot;</div></div></section></section><section class="chapter" id="attributes-0"><h2 class="chapter">4  &nbsp;&nbsp; Attributes</h2><section class="section" id="directory"><h3 class="section">4.1  &nbsp;&nbsp; directory?</h3><div class="paragraph"><p>Checks whether a path is a directory:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(directory? &quot;src&quot;) =&gt; true</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(directory? &quot;project.clj&quot;) =&gt; false</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(directory? &quot;NON-EXISTENT&quot;) =&gt; false</div></div></section><section class="section" id="executable"><h3 class="section">4.2  &nbsp;&nbsp; executable?</h3><div class="paragraph"><p>Checks whether a path is executable:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(executable? &quot;src&quot;) =&gt; true</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(executable? &quot;project.clj&quot;) =&gt; false</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(executable? &quot;NON-EXISTENT&quot;) =&gt; false</div></div></section><section class="section" id="exists"><h3 class="section">4.3  &nbsp;&nbsp; exists?</h3><div class="paragraph"><p>Checks whether a path exists:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(exists? &quot;src&quot;) =&gt; true</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(exists? &quot;NON-EXISTENT&quot;) =&gt; false</div></div></section><section class="section" id="file"><h3 class="section">4.4  &nbsp;&nbsp; file?</h3><div class="paragraph"><p>Checks whether a path is a regular file:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(file? &quot;src&quot;) =&gt; false</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(file? &quot;project.clj&quot;) =&gt; true</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(file? &quot;NON-EXISTENT&quot;) =&gt; false</div></div></section><section class="section" id="hidden"><h3 class="section">4.5  &nbsp;&nbsp; hidden?</h3><div class="paragraph"><p>Checks whether a path is hidden:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(hidden? &quot;.git&quot;) =&gt; true</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(hidden? &quot;project.clj&quot;) =&gt; false</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(hidden? &quot;NON-EXISTENT&quot;) =&gt; false</div></div></section><section class="section" id="link"><h3 class="section">4.6  &nbsp;&nbsp; link?</h3><div class="paragraph"><p>Checks whether a file is a link:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(link? &quot;project.clj&quot;) =&gt; false</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(link? &quot;/usr/local/bin/boot&quot;) =&gt; true</div></div></section><section class="section" id="readable"><h3 class="section">4.7  &nbsp;&nbsp; readable?</h3><div class="paragraph"><p>Checks whether a file is readable:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(readable? &quot;project.clj&quot;) =&gt; true</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(readable? &quot;NON-EXISTENT&quot;) =&gt; false</div></div></section><section class="section" id="writable"><h3 class="section">4.8  &nbsp;&nbsp; writable?</h3><div class="paragraph"><p>Checks whether a file is readable:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(writable? &quot;project.clj&quot;) =&gt; true</div></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(writable? &quot;/usr/local/bin/boot&quot;) =&gt; false</div></div></section></section><section class="chapter" id="operations"><h2 class="chapter">5  &nbsp;&nbsp; Operations</h2><section class="section" id="list"><h3 class="section">5.1  &nbsp;&nbsp; list</h3><div class="paragraph"><p>Lists all the files in a given directory:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(list &quot;src&quot;)
=&gt; {&quot;/Users/chris/Development/chit/hara/src&quot; &quot;rwxr--r--/d&quot;,
    &quot;/Users/chris/Development/chit/hara/src/hara&quot; &quot;rwxr-xr-x/d&quot;}</div></div><div class="paragraph"><p>We can look at the directory at a given depth:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(list &quot;src&quot; {:depth 2})
=&gt; {&quot;/Users/chris/Development/chit/hara/src&quot; &quot;rwxr--r--/d&quot;,
    &quot;/Users/chris/Development/chit/hara/src/hara/data.clj&quot; &quot;rw-r--r--/-&quot;,
    ... ...
    &quot;/Users/chris/Development/chit/hara/src/hara/function&quot; &quot;rwxr-xr-x/d&quot;}</div></div><div class="paragraph"><p>It is possible to look at an entire directory by using <code>:recursive true</code>:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(count (list &quot;src&quot; {:recursive true}))
=&gt; 182</div></div><div class="paragraph"><p>Or just to filter the files that we are interested in:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(count (list &quot;src&quot; {:include [&quot;.clj&quot;]
                    :recursive true}))
=&gt; 147</div></div></section><section class="section" id="select"><h3 class="section">5.2  &nbsp;&nbsp; select</h3><div class="paragraph"><p><code>select</code> is similar to <code>list</code>, but is recursive by default and returns a list of paths:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(take 5 (select &quot;src&quot;))
;;=&gt; (#path:&quot;/Users/chris/Development/chit/hara/src/hara/class/checks.clj&quot;
;;    #path:&quot;/Users/chris/Development/chit/hara/src/hara/class/inheritance.clj&quot;
;;    #path:&quot;/Users/chris/Development/chit/hara/src/hara/class.clj&quot;
;;    #path:&quot;/Users/chris/Development/chit/hara/src/hara/common/checks.clj&quot;
;;    #path:&quot;/Users/chris/Development/chit/hara/src/hara/common/error.clj&quot;)</div></div><div class="paragraph"><p>Using the <code>:file</code> and <code>:directory</code> keyword options, custom file walk functions can be created. In this case, we print out the map that is passed to the <code>:file</code> function everytime a file is visited:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(select &quot;src&quot; {:depth 1
               :file (fn [m]
                       (println m))})
;; {:path #path:&quot;/Users/chris/Development/chit/hara/src/hara&quot;,
;;  :accumulate #{:files},
;;  :exclude (),
;;  :include (),
;;  :directory {:pre #function[hara.common.primitives/F]},
;;  :file #function[documentation.hara-io-file/eval15449/fn--15450],
;;  :root #path:&quot;/Users/chris/Development/chit/hara/src&quot;,
;;  :with #{:root},
;;  :attrs #object[sun.nio.fs.UnixFileAttributes]
;;  :depth 1,
;;  :options #{},
;;  :accumulator #atom[[#path:&quot;/Users/chris/Development/chit/hara/src/hara&quot;] 0x501600cc]}</div></div><div class="paragraph"><p>So if we wish to print out the path whenever we visit, it can be written like this:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(select &quot;src&quot; {:depth 2
               :include [&quot;.clj&quot;]
               :file (fn [m]
                       (prn (str (:path m))))})

;; &quot;/Users/chris/Development/chit/hara/src/hara/class.clj&quot;
;; &quot;/Users/chris/Development/chit/hara/src/hara/common.clj&quot;
;;  ....
;; &quot;/Users/chris/Development/chit/hara/src/hara/string.clj&quot;
;; &quot;/Users/chris/Development/chit/hara/src/hara/test.clj&quot;
;; &quot;/Users/chris/Development/chit/hara/src/hara/time.clj&quot;</div></div><div class="paragraph"><p>For more examples, please see how <a href='https://github.com/zcaudate/hara/blob/2ad1169bb602d36fbc4fd56da5058745662ad0c0/src/hara/io/file.clj#L96-L127'>copy</a>, <a href='https://github.com/zcaudate/hara/blob/2ad1169bb602d36fbc4fd56da5058745662ad0c0/src/hara/io/file.clj#L70-L94'>list</a> and <a href='https://github.com/zcaudate/hara/blob/2ad1169bb602d36fbc4fd56da5058745662ad0c0/src/hara/io/file.clj#L146-L168'>delete</a> have been written. <a href='https://github.com/zcaudate/hara/blob/2ad1169bb602d36fbc4fd56da5058745662ad0c0/src/hara/io/file.clj#L32-L41'>select</a> is the exposed interface for <a href='https://github.com/zcaudate/hara/blob/2ad1169bb602d36fbc4fd56da5058745662ad0c0/src/hara/io/file/walk.clj#L137-L191'>hara.io.file.walk/walk</a> - they are essentially the same function.</p></div></section><section class="section" id="copy"><h3 class="section">5.3  &nbsp;&nbsp; copy</h3><div class="paragraph"><p>copies file from one location to another:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(copy &quot;project.clj&quot; &quot;project.clj.bak&quot;)</div></div><div class="paragraph"><p>copy directory, works the same as copy file:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(copy &quot;src&quot; &quot;src.bak&quot;)</div></div><div class="paragraph"><p>copy directory with depth of 2 levels:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(copy &quot;src&quot; &quot;src.2&quot; {:depth 2})</div></div><div class="paragraph"><p>copy only images to new directory:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(copy &quot;resources&quot; &quot;images.bak&quot;
      {:include [&quot;.png&quot; &quot;.jpg&quot;]})</div></div><div class="paragraph"><p>Simulate the copy operation, list the files that will be affected:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(copy &quot;resources&quot; &quot;images.bak&quot;
      {:include [&quot;.png&quot; &quot;.jpg&quot;]
       :simulate true})</div></div><div class="paragraph"><p>copy only links to new directory:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(copy &quot;&quot; &quot;../links&quot; 
      {:include [(fn [{:keys [path]}]
                   (link? path))]})</div></div><div class="paragraph"><p>copy everything except <code>.cljs</code> files to new directory:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(copy &quot;src&quot; &quot;clojure.bak&quot; {:exclude [&quot;.cljs&quot;]})</div></div></section><section class="section" id="delete"><h3 class="section">5.4  &nbsp;&nbsp; delete</h3><div class="paragraph"><p>deletes files or directories, the selection process is similar to <code>copy</code> and can be applied to both files and directories alike:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(delete &quot;project.clj&quot;)</div></div><div class="paragraph"><p>recursively deletes all <code>.DS&#95;Store</code> files in the directory:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(delete &quot;&quot; {:include [&quot;.DS_Store&quot;]})</div></div><div class="paragraph"><p>returns a list of files deleted, if no files are deleted, returns an empty set:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(delete &quot;NON-EXISTENT&quot;)
=&gt; #{}</div></div><div class="paragraph"><p>recursion can be turned off by explictly stating so:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(delete &quot;&quot; {:include [&quot;.DS_Store&quot;]
            :recursive false})</div></div></section><section class="section" id="move"><h3 class="section">5.5  &nbsp;&nbsp; move</h3><div class="paragraph"><p>Moves a file or directory. A move is a rename operation and so is quite efficient:</p></div><div class="code"><div hljs="hljs" language="clojure" no-escape="no-escape">(move &quot;src&quot; &quot;src.moved&quot;)
;;=&gt; #path:&quot;/Users/chris/Development/chit/hara/src.moved</div></div></section></section>
    </div>
</div><!--end of .container-->

  <section class="application">
    
  </section>
</body>

<script>
  $('#nav').affix({
    offset: {
        top: $('#nav').offset().top,
        bottom: $('footer').outerHeight(true) + $('.application').outerHeight(true) + 40
    }});
</script>


<script>
  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage("resize", "*");
  }
</script>
</body>
</html>
